{% extends "base.html" %}

{% block content %}
<div class="container">
  <!-- Page Header -->
  <div class="page-header" style="text-align: center; margin-bottom: 3rem;">
    <h1 style="font-size: 2.5rem; color: var(--text-main); margin-bottom: 1rem; font-family: 'Poppins', sans-serif;">
      <i class="fas fa-th-large" style="color: var(--primary); margin-right: 0.75rem;"></i>
      Shop by Category
    </h1>
    <p style="font-size: 1.125rem; color: var(--text-muted); max-width: 600px; margin: 0 auto;">
      Browse our wide selection of products across different categories
    </p>
  </div>

  <!-- Categories Grid -->
  <div class="categories-grid"
    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 3rem;">
    {% for c in categories %}
    <a href="{{ url_for('category', slug=c.slug) }}" class="category-card"
      style="display: block; text-decoration: none; position: relative; overflow: hidden; border-radius: var(--radius-lg); box-shadow: var(--shadow); transition: all 0.3s;">
      <!-- Category Image/Background -->
      <div class="category-image" style="height: 200px; overflow: hidden; position: relative;">
        <div
          style="width: 100%; height: 100%; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);">
        </div>
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3);"></div>

        <!-- Category Icon -->
        <div
          style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(255,255,255,0.3);">
          {% set icon = 'mobile-alt' if 'electronics' in c.name.lower() else
          'home' if 'home' in c.name.lower() else
          'tshirt' if 'fashion' in c.name.lower() else
          'utensils' if 'kitchen' in c.name.lower() else
          'laptop' if 'computer' in c.name.lower() else
          'heart' if 'health' in c.name.lower() else
          'car' if 'automotive' in c.name.lower() else
          'book' if 'book' in c.name.lower() else
          'gamepad' if 'gaming' in c.name.lower() else
          'couch' if 'furniture' in c.name.lower() else
          'shoe-prints' if 'footwear' in c.name.lower() else 'box' %}
          <i class="fas fa-{{ icon }}" style="font-size: 2rem; color: white;"></i>
        </div>
      </div>

      <!-- Category Info -->
      <div class="category-info" style="padding: 1.5rem; background: var(--bg-card); position: relative;">
        <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.5rem;">
          {{ c.name }}
        </h3>
        <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 1rem;">
          Browse all {{ c.name }} products
        </p>
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <span class="badge"
            style="background: var(--gray-100); color: var(--text-muted); padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.875rem;">
            <i class="fas fa-box" style="margin-right: 0.25rem;"></i>
            Shop Now
          </span>
          <i class="fas fa-arrow-right" style="color: var(--primary);"></i>
        </div>
      </div>

      <!-- Hover Overlay -->
      <div class="category-overlay"
        style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(37, 99, 235, 0.9); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;">
        <div style="text-align: center; color: white; padding: 2rem;">
          <i class="fas fa-shopping-bag" style="font-size: 2rem; margin-bottom: 1rem;"></i>
          <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Browse {{ c.name }}</h3>
          <p style="opacity: 0.9;">Click to view all products</p>
        </div>
      </div>
    </a>
    {% else %}
    <div
      style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: var(--bg-card); border-radius: var(--radius-lg); box-shadow: var(--shadow);">
      <i class="fas fa-th-large fa-3x" style="color: var(--text-muted); margin-bottom: 1rem;"></i>
      <h3 style="color: var(--text-main); margin-bottom: 0.5rem;">No Categories Found</h3>
      <p style="color: var(--text-muted);">Categories will appear here once added</p>
    </div>
    {% endfor %}
  </div>

  <!-- Features Section -->
  <div class="features-section"
    style="background: var(--gray-100); padding: 3rem; border-radius: var(--radius-lg); margin-bottom: 3rem;">
    <div style="text-align: center; margin-bottom: 2.5rem;">
      <h2 style="font-size: 1.75rem; color: var(--text-main); margin-bottom: 1rem; font-family: 'Poppins', sans-serif;">
        Why Shop With Us?
      </h2>
      <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">
        Experience the future of shopping with our innovative features
      </p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
      <div class="feature-card" style="text-align: center; padding: 1.5rem;">
        <div
          style="width: 70px; height: 70px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: white; font-size: 1.5rem;">
          <i class="fas fa-user-shield"></i>
        </div>
        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">Face
          Recognition
          Warranty</h3>
        <p style="color: var(--text-muted); font-size: 0.875rem;">No paperwork needed. Your face is your warranty claim
          verification.</p>
      </div>

      <div class="feature-card" style="text-align: center; padding: 1.5rem;">
        <div
          style="width: 70px; height: 70px; background: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: white; font-size: 1.5rem;">
          <i class="fas fa-shipping-fast"></i>
        </div>
        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">Fast & Free
          Delivery</h3>
        <p style="color: var(--text-muted); font-size: 0.875rem;">Quick and reliable shipping with free delivery on most
          orders.</p>
      </div>

      <div class="feature-card" style="text-align: center; padding: 1.5rem;">
        <div
          style="width: 70px; height: 70px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: white; font-size: 1.5rem;">
          <i class="fas fa-undo-alt"></i>
        </div>
        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">Easy Returns
        </h3>
        <p style="color: var(--text-muted); font-size: 0.875rem;">Hassle-free returns within 30 days for most products.
        </p>
      </div>

      <div class="feature-card" style="text-align: center; padding: 1.5rem;">
        <div
          style="width: 70px; height: 70px; background: var(--secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: white; font-size: 1.5rem;">
          <i class="fas fa-headset"></i>
        </div>
        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">24/7 Support
        </h3>
        <p style="color: var(--text-muted); font-size: 0.875rem;">Our customer support team is always here to help you.
        </p>
      </div>
    </div>
  </div>

  <!-- Call to Action -->
  <div class="cta-section"
    style="text-align: center; padding: 3rem; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); border-radius: var(--radius-lg); color: white;">
    <h2 style="font-size: 2rem; margin-bottom: 1rem; font-family: 'Poppins', sans-serif;">Ready to Shop?</h2>
    <p
      style="font-size: 1.125rem; margin-bottom: 2rem; opacity: 0.9; max-width: 600px; margin-left: auto; margin-right: auto;">
      Browse our entire collection or search for specific products
    </p>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
      <a href="{{ url_for('index') }}" class="btn-primary"
        style="display: inline-block; background: white; color: var(--primary); padding: 1rem 2rem; border-radius: var(--radius); text-decoration: none; font-weight: 600; transition: transform 0.2s;">
        <i class="fas fa-shopping-bag" style="margin-right: 0.5rem;"></i>
        View All Products
      </a>
      <a href="{{ url_for('search') }}" class="btn-outline"
        style="display: inline-block; background: transparent; color: white; padding: 1rem 2rem; border-radius: var(--radius); text-decoration: none; font-weight: 600; border: 2px solid white; transition: background 0.2s;">
        <i class="fas fa-search" style="margin-right: 0.5rem;"></i>
        Search Products
      </a>
    </div>
  </div>
</div>

<style>
  .category-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }

  .category-card:hover .category-overlay {
    opacity: 1;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .btn-outline:hover {
    background: white !important;
    color: var(--primary) !important;
  }

  .feature-card {
    transition: transform 0.3s;
  }

  .feature-card:hover {
    transform: translateY(-5px);
  }

  @media (max-width: 768px) {
    .categories-grid {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }

    .cta-section .btn-primary,
    .cta-section .btn-outline {
      width: 100%;
      text-align: center;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Add animation to category cards on scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    // Observe category cards
    document.querySelectorAll('.category-card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.5s, transform 0.5s';
      observer.observe(card);
    });

    // Feature cards animation
    document.querySelectorAll('.feature-card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.5s, transform 0.5s';

      // Stagger animation
      const index = Array.from(document.querySelectorAll('.feature-card')).indexOf(card);
      card.style.transitionDelay = `${index * 0.1}s`;

      observer.observe(card);
    });

    // Add click animation to category cards
    document.querySelectorAll('.category-card').forEach(card => {
      card.addEventListener('click', function (e) {
        // Add ripple effect
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;

        ripple.style.cssText = `
          position: absolute;
          border-radius: 50%;
          background: rgba(255,255,255,0.3);
          transform: scale(0);
          animation: ripple 0.6s linear;
          width: ${size}px;
          height: ${size}px;
          left: ${x}px;
          top: ${y}px;
          pointer-events: none;
        `;

        this.appendChild(ripple);

        setTimeout(() => {
          ripple.remove();
        }, 600);
      });
    });
  });

  // Add ripple animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
  `;
  document.head.appendChild(style);
</script>
{% endblock %}
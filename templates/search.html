{% extends "base.html" %}
{% block content %}
<div class="container">
  <h2 class="section-title">Search</h2>
  <form class="searchwide" action="{{ url_for('search') }}" method="get">
    <input name="q" type="text" placeholder="Search..." value="{{ q }}">
    <button class="btn" type="submit">Search</button>
  </form>
  <div class="grid">
    {% for p in results %}
      <div class="card">
        <img src="{{ p.image_url }}" alt="{{ p.name }}">
        <div class="card-body">
          <h3>{{ p.name }}</h3>
          <p class="muted">{{ p.category_name }}</p>
          <p class="price">₹{{ "%.2f"|format(p.price) }}</p>
          <form action="{{ url_for('add_to_cart', product_id=p.id) }}" method="post" class="form-inline">
            <label><small>Qty</small><input type="number" name="qty" min="1" value="1"></label>
            <button class="btn" type="submit">Add to cart</button>
          </form>
        </div>
      </div>
    {% else %}
      {% if q %}<p class="muted">No results for “{{ q }}”.</p>{% endif %}
    {% endfor %}
  </div>
</div>
{% endblock %}
